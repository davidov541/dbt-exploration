version: 2
models:
    - name: FACT_POSITION
      description: Fact table containing positions across all accounts.
      columns:
        - name: ACCOUNT_CODE
          description: The code for the account.
          tests:
            - not_null
        - name: SECURITY_CODE
          description: The symbol of the security.
          tests:
            - not_null
            - unique
        - name: SECURITY_NAME
          description: The name of the security.
          tests:
            - not_null
        - name: EXCHANGE_CODE
          description: >
            The short name or code of the exchange
            where the security is traded.
          tests:
            - not_null
        - name: REPORT_DATE
          description: >
            The date the report was extracted.
            We consider this position to be effective from
            this date forward, until a change is seen.
          tests:
            - not_null
        - name: QUANTITY
          description: >
            The number of securities we hold in the
            portfolio at the Report Date
          tests:
            - not_null
        - name: COST_BASE
          description: >
            The cost we paid for the securities that
            we hold in the portfolio at
            ABC Bank at the Report Date.
          tests:
            - not_null
        - name: POSITION_VALUE
          description: >
            The value of the securities in the portfolio
            on the Report Date.
          tests:
            - not_null
        - name: CURRENCY_CODE
          description: The currency for the monetary amounts of the position.
          tests:
            - not_null
        - name: UNREALIZED_PROFIT
          description: The unrealized profit on the position
          tests:
            - not_null
        - name: UNREALIZED_PROFIT_PCT
          description: The unrealized profit percentage on the position
          tests:
            - not_null
    - name: REF_ABC_BANK_SECURITY_INFO
      description: A history table for the securities dimension information from ABC Bank.
      columns:
        - name: SECURITY_CODE
          description: The symbol of this security.
          tests:
            - not_null
            - unique
        - name: SECURITY_NAME
          description: The name of this security.
          tests:
            - not_null
        - name: SECTOR_NAME
          description: The name of the sector for this security.
          tests:
            - not_null
        - name: INDUSTRY_NAME
          description: The name of the industry which this security serves.
          tests:
            - not_null
        - name: COUNTRY_CODE
          description: The country in which this security is based.
          tests:
            - not_null
        - name: EXCHANGE_CODE
          description: >
            The short name or code of the exchange
            where the security is traded.
          tests:
            - not_null
        - name: SECURITY_HKEY
          description: Hash key identifying the keys of a given row. For internal use only.
          tests:
            - not_null
        - name: SECURITY_HDIFF
          description: Hash key identifying the values that identify the version of a given row. For internal use only.
          tests:
            - not_null
        - name: RECORD_SOURCE
          description: Source that this row came from. For internal use only.
          tests:
            - not_null
        - name: LOAD_TS_UTC
          description: Timestamp when this data was loaded For internal use only.
          tests:
            - not_null